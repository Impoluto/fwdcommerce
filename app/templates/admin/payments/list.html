{extend "admin"}

{$query = [
	search => $params.search,
	where => $params.where,
	page => $params.page
]}

{get $payments from "/payments" $query}

<div class="list-container">
	<div class="list-header well">
		{$actions = [all => [where => []]]}
		{foreach get("/settings/payments") as $method => $settings}
			{$actions[$settings.name|default:$method] = [where => [method => $method]]}
		{/foreach}
		{render "search" for="payments" action=$params.action actions=$actions count=$payments.count}
	</div>
	<ul class="list-results">
		{render "payments/results" payments=$payments}
	</ul>
</div>